Class {
	#name : #CellGenerator,
	#superclass : #Object,
	#instVars : [
		'numberOfCells',
		'cellProbabilities'
	],
	#category : #'IngSoft2-Model'
}

{ #category : #initialization }
CellGenerator class >> length: aNumberOfCells probabilites: someProbabilities [
	^ self new initializeWith: aNumberOfCells probabilities: someProbabilities.
]

{ #category : #translating }
CellGenerator >> generate [

	| cells random randomGenerator |
	randomGenerator := Random new.
	cells := OrderedCollection new.
	1 to: numberOfCells do: [ :index |
		random := randomGenerator next.
		cellProbabilities do: [ :eachCellProbability |
			eachCellProbability addCellTo: cells ifIsInRange: random ] ].
	^ cells
]

{ #category : #initialization }
CellGenerator >> initializeWith: aNumberOfCells probabilities: someProbabilities [

	| rangeAcummulator aCellCreation cellRate aRangeStart |
	rangeAcummulator := 0.
	numberOfCells := aNumberOfCells.
	cellProbabilities := someProbabilities collect: [ :eachProbability |
		                     cellRate := eachProbability first.
		                     aCellCreation := eachProbability second.
		                     aRangeStart := rangeAcummulator.
		                     rangeAcummulator := rangeAcummulator + cellRate.

		                     CellProbability
			                     cellCreation: aCellCreation
			                     rangeStart: aRangeStart
			                     rangeEnd: rangeAcummulator ].
	^ self
]
